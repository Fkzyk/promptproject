{% extends "base.html" %}
{% load static custom_filters %}

{% block title %}Search Results{% endblock %}

{% block extra_head %}
<link rel="stylesheet" href="{% static 'css/styles.css' %}">
{% endblock %}

{% block content %}
<div class="container">
    <h1>Search Results</h1>

    <!-- 検索窓の表示 -->
    <div class="search-bar">
        <form method="GET" action="{% url 'promptapp:search' %}">
            <input type="text" name="q" value="{{ request.GET.q }}" placeholder="キーワードを入力">
            <select name="category">
                <option value="">カテゴリを選択</option>
                {% for category in categories %}
                    <option value="{{ category.name }}" {% if request.GET.category == category.name %}selected{% endif %}>{{ category_map|get_item:category.name }}</option>
                {% endfor %}
            </select>
            <button type="submit">Search</button>
        </form>
    </div>

    <!-- 検索結果の表示 -->
    <div class="search-results">
        {% if prompts %}
            <ul>
                {% for prompt in prompts %}
                    <li>{{ prompt.title }}: {{ prompt.description }}</li>
                {% endfor %}
            </ul>
        {% else %}
            <p>検索結果が見つかりませんでした。</p>
        {% endif %}
    </div>
</div>
{% endblock %}
